# ğŸŒ³ Eco.lÃ³gico

Plataforma integrada para sourcing, due diligence, monitoramento e insights de projetos de remoÃ§Ã£o de carbono baseados na natureza (reflorestamento).

[![License](https://img.shields.io/badge/license-Proprietary-red.svg)](LICENSE)
[![Node.js](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org/)
[![Python](https://img.shields.io/badge/python-%3E%3D3.11.0-blue.svg)](https://python.org/)
[![Docker](https://img.shields.io/badge/docker-compose-blue.svg)](https://docs.docker.com/compose/)

## ğŸ“‹ Ãndice

- [Tecnologias](#-tecnologias)
- [Arquitetura](#-arquitetura)
- [MÃ³dulos da Plataforma](#-mÃ³dulos-da-plataforma)
- [InstalaÃ§Ã£o e ConfiguraÃ§Ã£o](#-instalaÃ§Ã£o-e-configuraÃ§Ã£o)
- [Desenvolvimento](#-desenvolvimento)
- [Testes](#-testes)
- [API Documentation](#-api-documentation)
- [Casos de Uso](#-casos-de-uso)
- [SeguranÃ§a](#-seguranÃ§a)
- [Monitoramento](#-monitoramento)
- [Troubleshooting](#-troubleshooting)
- [Contribuindo](#-contribuindo)

## ğŸš€ Tecnologias

### Stack Principal
- **Frontend**: Next.js 14 + TypeScript + Tailwind CSS
- **Backend**: NestJS + TypeScript
- **AI Service**: Python + FastAPI + TensorFlow/PyTorch
- **Banco de Dados**: PostgreSQL com PostGIS
- **Cache**: Redis
- **Infraestrutura**: Docker + Docker Compose

### IntegraÃ§Ãµes de SatÃ©lite
- Mapbox
- Planet Labs
- Sentinel Hub

## ğŸ—ï¸ Arquitetura

A plataforma Ã© construÃ­da com uma arquitetura de microserviÃ§os para garantir escalabilidade e manutenibilidade:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Frontend      â”‚    â”‚   Backend       â”‚    â”‚   AI Service    â”‚
â”‚   (Next.js)     â”‚â—„â”€â”€â–ºâ”‚   (NestJS)      â”‚â—„â”€â”€â–ºâ”‚   (FastAPI)     â”‚
â”‚   Port: 3000    â”‚    â”‚   Port: 3001    â”‚    â”‚   Port: 8000    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚        Infraestrutura          â”‚
                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                    â”‚  â”‚ PostgreSQL  â”‚ â”‚   Redis   â”‚  â”‚
                    â”‚  â”‚  + PostGIS  â”‚ â”‚  (Cache)  â”‚  â”‚
                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ServiÃ§os Externos
- **Satellite APIs**: Google Earth Engine, Planet Labs, Sentinel Hub
- **Authentication**: JWT-based authentication
- **Monitoring**: Logs centralizados e mÃ©tricas de performance

## ğŸ“¦ MÃ³dulos da Plataforma

### 1. Source
- **Coleta uniforme de dados**: Consolida informaÃ§Ãµes de centenas de Ã¡reas e projetos
- **Screening automatizado**: Filtra as iniciativas mais promissoras automaticamente

### 2. Diligence
- **DMRV Insights**: RelatÃ³rios detalhados sobre carbono sequestrado
- **AnÃ¡lise de riscos**: AvaliaÃ§Ã£o de riscos (incÃªndios, mudanÃ§as de uso do solo, adicionalidade)
- **Baseline dinÃ¢mico**: CÃ¡lculos de linha de base atualizados

### 3. Track
- **Monitoramento em tempo real**: Acompanha cobertura florestal usando imagens de satÃ©lite
- **Alertas automÃ¡ticos**: NotificaÃ§Ãµes sobre mudanÃ§as detectadas
- **Rastreamento de fundos**: Monitora alocaÃ§Ã£o de recursos ao longo do tempo
- **Modulo Lavoura-Floresta**: Monitora propriedades rurais com sistema agroflorestal e/ou LAF

### 4. Insights
- **AnÃ¡lises avanÃ§adas**: Dados cientÃ­ficos e visualizaÃ§Ãµes personalizadas
- **Benchmarks**: ComparaÃ§Ã£o entre projetos
- **RelatÃ³rios sob demanda**: GeraÃ§Ã£o de anÃ¡lises ad hoc

## ğŸ› ï¸ InstalaÃ§Ã£o e ConfiguraÃ§Ã£o

### PrÃ©-requisitos
- Docker e Docker Compose
- Node.js 18+ (para desenvolvimento local)
- Python 3.11+ (para desenvolvimento local)

### ConfiguraÃ§Ã£o do Ambiente

1. Clone o repositÃ³rio:
```bash
git clone https://github.com/seu-usuario/ecologico.git
cd ecologico
```

2. Copie o arquivo de ambiente:
```bash
cp env.example .env
```

3. Configure as variÃ¡veis de ambiente no arquivo `.env`:
- Chaves de API dos serviÃ§os de satÃ©lite
- Credenciais do banco de dados
- ConfiguraÃ§Ãµes de autenticaÃ§Ã£o

### Executando com Docker

```bash
# Construir e iniciar todos os serviÃ§os
docker-compose up -d

# Verificar logs
docker-compose logs -f

# Parar todos os serviÃ§os
docker-compose down
```

A aplicaÃ§Ã£o estarÃ¡ disponÃ­vel em:
- Frontend: http://localhost:3000
- Backend API: http://localhost:3001
- AI Service: http://localhost:8000
- DocumentaÃ§Ã£o API: http://localhost:3001/api/docs

## ğŸ‘¨â€ğŸ’» Desenvolvimento

### ConfiguraÃ§Ã£o Local

Para desenvolvimento local sem Docker, configure cada serviÃ§o separadamente:

#### Frontend (Next.js)
```bash
# Navegue para o diretÃ³rio do frontend
cd frontend

# Instale as dependÃªncias
npm install

# Inicie o servidor de desenvolvimento
npm run dev

# Servidor disponÃ­vel em http://localhost:3000
```

#### Backend (NestJS)
```bash
# Navegue para o diretÃ³rio do backend
cd backend

# Instale as dependÃªncias
npm install

# Configure o banco de dados
npm run db:migrate

# Inicie o servidor de desenvolvimento
npm run start:dev

# API disponÃ­vel em http://localhost:3001
```

#### AI Service (Python)
```bash
# Navegue para o diretÃ³rio do AI service
cd ai-service

# Crie um ambiente virtual
python -m venv venv
source venv/bin/activate  # Linux/Mac
# ou
venv\Scripts\activate  # Windows

# Instale as dependÃªncias
pip install -r requirements.txt

# Inicie o servidor
uvicorn app.main:app --reload --port 8000

# API disponÃ­vel em http://localhost:8000
```

### VariÃ¡veis de Ambiente

Copie o arquivo de exemplo e configure as variÃ¡veis necessÃ¡rias:

```bash
# Arquivo .env.example para .env
cp .env.example .env
```

**VariÃ¡veis obrigatÃ³rias:**
- `DATABASE_URL`: URL de conexÃ£o PostgreSQL
- `REDIS_URL`: URL de conexÃ£o Redis
- `JWT_SECRET`: Chave secreta para JWT
- `GOOGLE_EARTH_ENGINE_KEY`: Chave da API Google Earth Engine
- `PLANET_LABS_API_KEY`: Chave da API Planet Labs
- `SENTINEL_HUB_CLIENT_ID`: ID do cliente Sentinel Hub
- `SENTINEL_HUB_CLIENT_SECRET`: Segredo do cliente Sentinel Hub

## ğŸ§ª Testes

### Executando Testes

#### Frontend
```bash
cd frontend
npm run test          # Testes unitÃ¡rios
npm run test:e2e      # Testes end-to-end
npm run test:coverage # Cobertura de testes
```

#### Backend
```bash
cd backend
npm run test          # Testes unitÃ¡rios
npm run test:e2e      # Testes end-to-end
npm run test:cov      # Cobertura de testes
```

#### AI Service
```bash
cd ai-service
pytest                # Testes unitÃ¡rios
pytest --cov         # Cobertura de testes
```

### Qualidade de CÃ³digo

#### Frontend & Backend
```bash
# ESLint
npm run lint
npm run lint:fix

# Prettier
npm run format

# TypeScript
npm run type-check
```

#### AI Service
```bash
# Black (formataÃ§Ã£o)
black .

# Flake8 (linting)
flake8 .

# MyPy (type checking)
mypy .
```

## ğŸ“š API Documentation

### DocumentaÃ§Ã£o Interativa

Acesse a documentaÃ§Ã£o interativa das APIs:

- **Backend API**: http://localhost:3001/api/docs (Swagger)
- **AI Service**: http://localhost:8000/docs (FastAPI docs)

### Endpoints Principais

#### Backend API
```
GET    /api/projects           # Lista todos os projetos
POST   /api/projects           # Cria um novo projeto
GET    /api/projects/:id       # ObtÃ©m detalhes de um projeto
PUT    /api/projects/:id       # Atualiza um projeto
DELETE /api/projects/:id       # Remove um projeto

GET    /api/monitoring/:id     # Dados de monitoramento
POST   /api/analysis           # Inicia anÃ¡lise de due diligence
GET    /api/reports/:id        # RelatÃ³rios gerados
```

#### AI Service
```
POST   /predict/forest-cover  # PrediÃ§Ã£o de cobertura florestal
POST   /analyze/risk          # AnÃ¡lise de risco
POST   /calculate/carbon      # CÃ¡lculo de carbono sequestrado
GET    /models/status         # Status dos modelos de ML
```

### AutenticaÃ§Ã£o

Todas as APIs requerem autenticaÃ§Ã£o via JWT. Inclua o token no header:

```bash
Authorization: Bearer <your-jwt-token>
```

## ğŸ“± Casos de Uso

### Empresas
- Buscar crÃ©ditos de carbono de alta qualidade
- Cumprir metas ESG
- Monitorar projetos investidos

### Investidores
- Reduzir riscos com anÃ¡lises detalhadas
- Diversificar portfÃ³lios com soluÃ§Ãµes baseadas na natureza
- Acompanhar performance em tempo real

### Desenvolvedores de Projetos
- Atrair capital com transparÃªncia
- Acelerar processos de due diligence
- Demonstrar impacto com dados cientÃ­ficos

## ğŸ” SeguranÃ§a

- AutenticaÃ§Ã£o JWT
- Criptografia de dados sensÃ­veis
- Rate limiting nas APIs
- ValidaÃ§Ã£o de entrada em todos os endpoints

## ğŸ“Š Monitoramento

- Logs centralizados
- MÃ©tricas de performance
- Alertas de sistema
- Backup automÃ¡tico de dados

### ConfiguraÃ§Ã£o de Monitoramento

#### Logs
```bash
# Visualizar logs em tempo real
docker-compose logs -f

# Logs especÃ­ficos por serviÃ§o
docker-compose logs -f frontend
docker-compose logs -f backend
docker-compose logs -f ai-service
```

#### MÃ©tricas
As mÃ©tricas sÃ£o coletadas automaticamente e podem ser visualizadas em:
- **Health Check**: http://localhost:3001/health
- **AI Service Status**: http://localhost:8000/health
- **Database Status**: Verificado automaticamente pelos health checks

## ğŸ› ï¸ Troubleshooting

### Problemas Comuns

#### Docker nÃ£o inicia
```bash
# Verifique se o Docker estÃ¡ rodando
docker --version
docker-compose --version

# Limpe containers e volumes antigos
docker-compose down -v
docker system prune -f
```

#### Erro de conexÃ£o com banco de dados
```bash
# Verifique se o PostgreSQL estÃ¡ rodando
docker-compose ps

# Resetar o banco de dados
docker-compose down -v
docker-compose up -d postgres
docker-compose exec backend npm run db:migrate
```

#### Problemas com APIs de satÃ©lite
1. Verifique se as chaves de API estÃ£o configuradas no `.env`
2. Confirme se as chaves nÃ£o expiraram
3. Verifique os logs para erros de rate limiting

#### Frontend nÃ£o carrega
```bash
# Limpe o cache do Next.js
cd frontend
rm -rf .next
npm run build
npm run dev
```

#### AI Service com erro de dependÃªncias
```bash
# Reconstrua o container do AI service
docker-compose build ai-service
docker-compose up -d ai-service
```

### FAQ

**Q: Como resetar todos os dados?**
```bash
docker-compose down -v
docker-compose up -d
```

**Q: Como fazer backup do banco de dados?**
```bash
docker-compose exec postgres pg_dump -U postgres ecologico > backup.sql
```

**Q: Como restaurar backup do banco?**
```bash
docker-compose exec -T postgres psql -U postgres ecologico < backup.sql
```

**Q: Como configurar HTTPS em produÃ§Ã£o?**
Configure um reverse proxy (Nginx/Traefik) com certificados SSL/TLS.

**Q: Como escalar os serviÃ§os?**
```bash
docker-compose up -d --scale backend=3 --scale ai-service=2
```

## ğŸ¤ Contribuindo

### Fluxo de ContribuiÃ§Ã£o

1. **Fork** o repositÃ³rio
2. **Clone** seu fork localmente
3. **Crie** uma branch para sua feature (`git checkout -b feature/nova-funcionalidade`)
4. **FaÃ§a** suas mudanÃ§as seguindo as convenÃ§Ãµes de cÃ³digo
5. **Execute** os testes e linting
6. **Commit** suas mudanÃ§as (`git commit -m 'feat: adiciona nova funcionalidade'`)
7. **Push** para sua branch (`git push origin feature/nova-funcionalidade`)
8. **Abra** um Pull Request

### ConvenÃ§Ãµes de CÃ³digo

#### Commits
Seguimos a convenÃ§Ã£o [Conventional Commits](https://www.conventionalcommits.org/):

```
feat: nova funcionalidade
fix: correÃ§Ã£o de bug
docs: documentaÃ§Ã£o
style: formataÃ§Ã£o
refactor: refatoraÃ§Ã£o
test: testes
chore: manutenÃ§Ã£o
```

#### CÃ³digo
- **TypeScript/JavaScript**: ESLint + Prettier
- **Python**: Black + Flake8 + MyPy
- **Commits**: Conventional Commits
- **Branches**: `feature/`, `fix/`, `docs/`

### Pull Request Template

Ao abrir um PR, inclua:

- [ ] DescriÃ§Ã£o das mudanÃ§as
- [ ] Testes adicionados/atualizados
- [ ] DocumentaÃ§Ã£o atualizada
- [ ] Linting passou
- [ ] Testes passaram

Para mais detalhes, leia nosso guia de contribuiÃ§Ã£o completo.

## ğŸ“ LicenÃ§a

Este projeto estÃ¡ sob licenÃ§a proprietÃ¡ria. Todos os direitos reservados.

---

**Eco.lÃ³gico** - Tecnologia para um futuro mais verde ğŸŒ± 